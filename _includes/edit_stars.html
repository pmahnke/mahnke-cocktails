{% assign sum = 0 %}
{% assign orig = 0.0 %}
{% assign rating = site.data.ratings[page.iconfile].ratings %}
{% for r in rating %}
{% if r.person == include.name %}
{% assign sum = r.rating | times: 2 %}
{% assign orig = r.rating %}
{% endif %}
{% endfor %}

{% capture link %}https://mahnke.net/cgi-bin/cocktail_rating.cgi?person={{include.name}}&file={% endcapture%}
{% assign whole = sum | floor %}{% assign half = average | modulo: 1 %}{% assign counter = 0 %}{% for i in (0..9) %}{% if counter < whole %}<a href="{{link}}{{page.iconfile}}&rating={{counter|plus:1}}"><svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#fcc200"><g><rect fill="none" height="24" width="24" x="0"/><polygon points="14.43,10 12,2 9.57,10 2,10 8.18,14.41 5.83,22 12,17.31 18.18,22 15.83,14.41 22,10"/></g></svg></a>{% elsif counter == whole and half == 0.5 %}<hrefbf="{{link}}{{page.iconfile}}&rating={{counter|plus:1.5}}"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fcc200"><path d="M480-644v236l96 74-36-122 90-64H518l-38-124ZM233-120l93-304L80-600h304l96-320 96 320h304L634-424l93 304-247-188-247 188Z"/></svg></a>{% else %}<a href="{{link}}{{page.iconfile}}&rating={{counter|plus:1}}"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#999999"><path d="m384-334 96-74 96 74-36-122 90-64H518l-38-124-38 124H330l90 64-36 122ZM233-120l93-304L80-600h304l96-320 96 320h304L634-424l93 304-247-188-247 188Zm247-369Z"/></svg></a>{% endif %}{% assign counter = counter | plus: 1 %}{% endfor %}

<br><em style="font-size: 1.5rem;">currently rated: {{ orig }}, or {{ sum }} on a 10 pt scale</em>